<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Portal Alumni Universitas Kuningan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>

    <header class="navbar-uniku">
    <div class="logo">
        <img src="img/logo_uniku-removebg-preview (1).png" alt="Logo UB">
        <span>Alumni Universitas Kuningan</span>
    </div>

    <nav class="nav-menu" id="navMenu">
        <a href="#berita" id="menuBerita">Berita</a>
        <a href="alumni/prestasi.html">Profil Prestasi Alumni</a>
        <a href="#kontribusi" id="menuKontribusi">Kontribusi</a>
        <a id="menuTestimoni" href="#testimoni">Testimoni Alumni</a>
        <a href="#lowongan" id="menuLowongan">Lowongan Pekerjaan</a>

        <a id="profilBtn"
           href="alumni/profil.html"
           class="btn btn-primary btn-sm d-none">
           Profil Saya
        </a>

        <a href="#" id="menuLogout"
           class="text-danger ms-3"
           style="display:none;">
           Logout
        </a>
    </nav>

    <button
      id="loginBtn"
      class="btn btn-warning btn-sm fw-semibold rounded-pill px-4"
      data-bs-toggle="modal"
      data-bs-target="#loginModal">
      Login
    </button>

    <div class="menu-toggle" id="menuToggle">&#9776;</div>
</header>

<section class="hero">
    <div class="hero-content">
       <div class="hero-accent"></div>
        <h1>
          <strong>SELAMAT DATANG</strong><br>
          <span class="kuning">DI PORTAL ALUMNI</span><br>
          <span>UNIVERSITAS KUNINGAN</span>
        </h1>
        <p>
            Website ini berisi informasi profil dan aktivitas alumni
            Universitas Kuningan.
        </p>

       <div class="search-box">
        <input 
          type="text" 
          id="searchHero"
          placeholder="Cari lowongan, perusahaan, berita...">

        <button onclick="heroSearch()">Cari</button>
      </div>
    </div>

    <img src="img/niku.png" class="hero-decor" alt="">
</section>

<section class="section" id="lowongan">
  <h2 class="section-title">Lowongan Pekerjaan</h2>
    <div class="row mb-3">
  <div class="col-md-4 mb-2">
    <input type="text" id="searchInput"
      class="form-control"
      placeholder="Cari posisi / perusahaan...">
  </div>

  <div class="col-md-4 mb-2">
    <select id="filterLokasi" class="form-select">
      <option value="">Semua Lokasi</option>
    </select>
  </div>

  <div class="col-md-4 mb-2">
    <select id="filterPerusahaan" class="form-select">
      <option value="">Semua Perusahaan</option>
    </select>
  </div>
</div>
  <div class="event-grid" id="lokerList"></div>

  <div class="text-center mt-4">
    <button class="btn">More Event</button>
  </div>
</section>

<section class="section gray" id="berita">
  <h2 class="section-title">Berita</h2>

  <div class="event-grid" id="beritaList"></div>
  <div class="text-center mt-4">
  <button id="btnMoreBerita"
    class="btn btn-warning"
    onclick="page++; renderBerita(allBerita)">
    Load More
  </button>
</div>
</section>

<section class="section" id="testimoni">
  <h2 class="section-title">Testimoni Alumni</h2>

  <div class="row" id="testimoniList"></div>
</section>
<section class="section">
  <h2 class="section-title">Notifikasi Saya</h2>

  <div id="notifKontribusi"></div>
</section>
<section class="section gray" id="kontribusi">
  <h2 class="section-title">Kontribusi Alumni</h2>

  <div class="row mt-4">

    <!-- NARASUMBER -->
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body text-center">
          <h5>üé§ Jadi Narasumber</h5>
          <p class="text-muted">
            Alumni dapat berbagi pengalaman karier atau dunia kerja.
          </p>
          <button class="btn btn-warning btn-sm"
            data-bs-toggle="modal"
            data-bs-target="#modalNarasumber">
            Daftar Narasumber
          </button>
        </div>
      </div>
    </div>

    <!-- DONASI -->
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body text-center">
          <h5>üéì Donasi / Beasiswa</h5>
          <p class="text-muted">
            Bantu adik tingkat melalui program alumni.
          </p>
          <button class="btn btn-success btn-sm"
            data-bs-toggle="modal"
            data-bs-target="#modalDonasi">
            Lihat Program
          </button>
        </div>
      </div>
    </div>

    <!-- KOLABORASI -->
    <div class="col-md-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body text-center">
          <h5>ü§ù Kolaborasi Alumni</h5>
          <p class="text-muted">
            Kerja sama kegiatan, event, startup, dan UMKM.
          </p>
          <button class="btn btn-primary btn-sm"
            data-bs-toggle="modal"
            data-bs-target="#modalKolaborasi">
            Ajukan Kolaborasi
          </button>
        </div>
      </div>
    </div>

  </div>
</section>
<section class="section gray" id="podcast">
  <h2 class="section-title">Podcast Alumni Yang Sudah Bekerja</h2>
  <div class="row" id="podcastList"></div>
</section>

<script src="js/script.js"></script>
<footer class="footer">
  <div class="footer-container">

    <!-- KIRI -->
    <div class="footer-col">
      <div class="footer-logo">
        <img src="img/logo_uniku-removebg-preview (1).png">
        <h3>ALUMNI<br>UNIVERSITAS KUNINGAN</h3>
      </div>

      <p class="footer-desc">
        Portal Alumni Universitas Kuningan sebagai wadah komunikasi,
        informasi, dan kolaborasi antar alumni.
      </p>
    </div>

    <!-- TENGAH -->
    <div class="footer-col">
      <h5>Alamat Kampus</h5>
      <p>
        <b>Campus 1</b><br>
        Jl. Cut Nyak Dhien No.36A, Cijoho, Kuningan, Jawa Barat 45513
      </p>
      <p>
        <b>Campus 2</b><br>
        Jl. Pramuka No.67, Purwawinangun, Kuningan, Jawa Barat 45512
      </p>
    </div>

    <!-- KANAN -->
    <div class="footer-col">
      <h5>Media Sosial</h5>

      <div class="footer-social">
        <a href="https://www.instagram.com/universitas_kuningan?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="><i class="bi bi-instagram"></i></a>
        <a href="https://www.facebook.com/UniversitasKuninganJaBar/"><i class="bi bi-facebook"></i></a>
        <a href="https://www.youtube.com/channel/UC2KJc-avHFsUHYslTznkG-g"><i class="bi bi-youtube"></i></a>
        <a href="https://uniku.ac.id/"><i class="bi bi-globe"></i></a>
      </div>
    </div>

  </div>

  <div class="footer-bottom">
    Managed with ‚ù§ by <span>calon software engineer</span>
  </div>
</footer>
<div class="modal fade" id="modalNarasumber" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <form class="formKontribusi" data-jenis="Narasumber">

        <div class="modal-header">
          <h5 class="modal-title">üé§ Daftar Narasumber Alumni</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <input name="judul" class="form-control mb-2" placeholder="Nama Lengkap">
          <input class="form-control mb-2" placeholder="Program Studi">
          <input class="form-control mb-2" placeholder="Pekerjaan / Jabatan">
          <input class="form-control mb-2" placeholder="Topik yang ingin dibagikan">
          <textarea name="deskripsi" class="form-control" rows="3"
            placeholder="Pengalaman singkat / motivasi"></textarea>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-warning">Kirim</button>
        </div>

      </form>

    </div>
  </div>
</div>

<div class="modal fade" id="modalDonasi" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <form class="formKontribusi" data-jenis="Donasi">

        <div class="modal-header">
          <h5 class="modal-title">üéì Donasi / Beasiswa Alumni</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <input name="judul" class="form-control mb-2" placeholder="Nama Alumni">
          <input class="form-control mb-2" placeholder="Nominal (opsional)">
          <textarea name="deskripsi" class="form-control" rows="3"
            placeholder="Pesan atau tujuan donasi"></textarea>

          <div class="alert alert-info mt-3">
            üí° Informasi rekening akan ditampilkan setelah admin menyetujui pengajuan.
          </div>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-success">Ajukan</button>
        </div>

      </form>

    </div>
  </div>
</div>

<div class="modal fade" id="modalKolaborasi" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <form class="formKontribusi" data-jenis="Kolaborasi">

        <div class="modal-header">
          <h5 class="modal-title">ü§ù Kolaborasi Alumni</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          <input name="judul" class="form-control mb-2" placeholder="Nama Alumni / Perusahaan">
          <input
  name="jenis_kolaborasi"
  class="form-control mb-2"
  placeholder="Jenis Kolaborasi">
          <textarea name="deskripsi" class="form-control" rows="4"
            placeholder="Deskripsi rencana kolaborasi"></textarea>
        </div>

        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-primary">Ajukan</button>
        </div>

      </form>

    </div>
  </div>
</div>

<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Login Portal Alumni</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
  <form id="loginForm">
    <div class="mb-3">
      <label class="form-label">Login sebagai</label>
      <select class="form-select" id="role" required>
        <option value="">-- Pilih Role --</option>
        <option value="admin">Admin</option>
        <option value="perusahaan">Perusahaan</option>
        <option value="alumni">Alumni</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input type="email" id="email" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Password</label>
      <input type="password" id="password" class="form-control" required>
    </div>

<div class="d-grid mb-2">
  <button type="button"
    id="btnDaftar"
    class="btn btn-warning fw-semibold">
    Daftar
  </button>
</div>

<div class="d-grid">
  <button type="button"
    class="btn btn-warning fw-semibold"
    onclick="login()">
    Login
  </button>
</div>
  </form>
</div>

    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/login.js"></script>

<script>
const API = "https://script.google.com/macros/s/AKfycbyDS1ml_xKj_1BAvS6_eD9sMbbYDShc3IFUtONn4jV117sDkHgr1TkxhjFm-DF1FqjAVw/exec"
const isLoggedIn = localStorage.getItem("login") === "true";
const userRole = localStorage.getItem("role");
const alumniStatus = localStorage.getItem("alumni_status");

const profilBtn = document.getElementById("profilBtn");
const menuLogout = document.getElementById("menuLogout");
const loginBtn = document.getElementById("loginBtn");
const menuTestimoni = document.getElementById("menuTestimoni");

if (
  localStorage.getItem("login") === "true" &&
  localStorage.getItem("role") === "alumni" &&
  localStorage.getItem("alumni_status") === "Verified"
) {
  profilBtn.classList.remove("d-none");
} else {
  profilBtn.classList.add("d-none");
}
menuLogout.style.display = "none";
loginBtn.style.display = "inline-block";

if (isLoggedIn) {
  loginBtn.style.display = "none";
  menuLogout.style.display = "inline-block";

  if (userRole === "alumni" && alumniStatus === "Verified") {
    profilBtn.style.display = "inline-block";

    menuTestimoni.href = "alumni/testimoni.html";
  } else {
    menuTestimoni.href = "#testimoni";
  }

} else {
  menuTestimoni.href = "#testimoni";
}

menuLogout.onclick = function () {
  localStorage.clear();
  window.location.href = "index.html";
};
</script>

<script>
let allData = [];
async function loadLowongan() {
  const res = await fetch(API + "?action=getLowongan");
  allData = await res.json();
  render(allData);
  loadFilter(allData);
}

function loadFilter(data) {
  filterLokasi.innerHTML = `<option value="">Semua Lokasi</option>`;
  filterPerusahaan.innerHTML = `<option value="">Semua Perusahaan</option>`;

  [...new Set(data.map(l => l.lokasi))].forEach(l => {
    filterLokasi.innerHTML += `<option>${l}</option>`;
  });

  [...new Set(data.map(l => l.perusahaan))].forEach(p => {
    filterPerusahaan.innerHTML += `<option>${p}</option>`;
  });
}

function render(data) {
  const list = document.getElementById("lokerList");
  list.innerHTML = "";

  if (data.length === 0) {
    list.innerHTML = "<p class='text-center'>Tidak ada lowongan.</p>";
    return;
  }

  data.forEach(l => {
    let tombol = "";

    if (!isLoggedIn) {
      tombol = `<button class="btn btn-secondary btn-sm" onclick="alert('Silakan login sebagai alumni')">Login untuk Melamar</button>`;
    }
    else if (userRole !== "alumni") {
      tombol = `<button class="btn btn-warning btn-sm" disabled>Hanya alumni</button>`;
    }
    else if (alumniStatus !== "Verified") {
      tombol = `<button class="btn btn-warning btn-sm" onclick="alert('Akun belum diverifikasi')">Belum diverifikasi</button>`;
    }
    else {
      tombol = `<a href="detail.html?id=${l.id}" class="btn btn-success btn-sm">Lamar Sekarang</a>`;
    }
    let gambar = l.gambar || "";

if (gambar.includes("drive.google.com")) {
  const match = gambar.match(/\/d\/(.+?)\//);
  if (match) {
    gambar = "https://drive.google.com/uc?id=" + match[1];
  }
}

if (!gambar) {
  gambar = "img/loker.png";
}
    list.innerHTML += `
      <div class="event-card">
        <img src="${gambar}">
        <div class="event-body">
          <span>${l.perusahaan}</span>
          <h4>${l.judul}</h4>
          <p>${l.deskripsi}</p>
          <small>${l.lokasi}</small><br>
          ${tombol}
        </div>
      </div>
    `;
  });
}

function filter() {
  const q = searchInput.value.toLowerCase();
  const lokasi = filterLokasi.value;
  const perusahaan = filterPerusahaan.value;

  render(allData.filter(l =>
    (l.judul.toLowerCase().includes(q) || l.perusahaan.toLowerCase().includes(q)) &&
    (lokasi === "" || l.lokasi === lokasi) &&
    (perusahaan === "" || l.perusahaan === perusahaan)
  ));
}

searchInput.addEventListener("input", filter);
filterLokasi.addEventListener("change", filter);
filterPerusahaan.addEventListener("change", filter);

loadLowongan();
</script>
<script>
window.addEventListener("load", () => {
  document.querySelectorAll(".modal-backdrop").forEach(e => e.remove());

  document.body.classList.remove("modal-open");
  document.body.style.overflow = "auto";
});
</script>
<script>
document.getElementById("btnDaftar").onclick = function () {
  const role = document.getElementById("role").value;

  if (!role) {
    alert("Pilih role terlebih dahulu");
    return;
  }

  if (role === "alumni") {
    window.location.href = "alumni/daftar.html";
  }
  else if (role === "perusahaan") {
    window.location.href = "perusahaan/daftar.html";
  }
  else {
    alert("Admin tidak dapat mendaftar");
  }
};
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const menuLowongan = document.getElementById("menuLowongan");
  const sectionLowongan = document.getElementById("lowongan");

  if (!menuLowongan || !sectionLowongan) return;

  menuLowongan.addEventListener("click", () => {
    menuLowongan.classList.add("active");
  });

  window.addEventListener("scroll", () => {
    const scrollY = window.scrollY;
    const top = sectionLowongan.offsetTop - 160;
    const bottom = top + sectionLowongan.offsetHeight;

    if (scrollY >= top && scrollY < bottom) {
      menuLowongan.classList.add("active");
    } else {
      menuLowongan.classList.remove("active");
    }
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const menus = [
    { menu: "menuBerita", section: "berita" },
    { menu: "menuLowongan", section: "lowongan" }
  ];

  menus.forEach(item => {
    const menuEl = document.getElementById(item.menu);
    const sectionEl = document.getElementById(item.section);

    if (!menuEl || !sectionEl) return;

    // aktif saat klik
    menuEl.addEventListener("click", () => {
      menuEl.classList.add("active");
    });

    // aktif saat scroll
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      const top = sectionEl.offsetTop - 160;
      const bottom = top + sectionEl.offsetHeight;

      if (scrollY >= top && scrollY < bottom) {
        menuEl.classList.add("active");
      } else {
        menuEl.classList.remove("active");
      }
    });
  });
});
</script>
<script>
let allBerita = [];
async function loadBerita() {
  const res = await fetch(API + "?action=getBerita");
  allBerita = await res.json();
  renderBerita(allBerita);
}

let page = 1;
const limit = 4;
function renderBerita(data) {
  const list = document.getElementById("beritaList");
  list.innerHTML = "";

  const sliced = data.slice(0, page * limit);

  if (sliced.length === 0) {
    list.innerHTML = "<p>Tidak ada berita.</p>";
    return;
  }

  sliced.forEach(b => {
    let badge = "";
    let tombol = "";

    if (b.link && b.link !== "") {
      badge = `<span class="badge bg-warning text-dark mb-2">Sumber Eksternal</span>`;
      tombol = `
        <a href="${b.link}"
   target="_blank"
   onclick="fetch(API + '?action=klikBerita&id=${b.id}')"
   class="btn btn-outline-warning btn-sm">
   Baca di Website Sumber
</a>
      `;
    } else {
      badge = `<span class="badge bg-success mb-2">Berita Internal</span>`;
      tombol = `
        <a href="detail-berita.html?id=${b.id}"
           class="btn btn-warning btn-sm">
          Baca Selengkapnya
        </a>
      `;
    }

    list.innerHTML += `
      <div class="event-card">
        <img src="${b.gambar || 'img/news.jpeg'}">
        <div class="event-body">
          ${badge}
          <h4>${b.judul}</h4>
          <p>${b.ringkasan}</p>
          <small>${b.tanggal}</small><br>
          ${tombol}
        </div>
      </div>
    `;
  });

  const btn = document.getElementById("btnMoreBerita");
  if (btn) {
    btn.style.display = data.length > page * limit ? "block" : "none";
  }
}
loadBerita();
</script>
<script>
async function loadTestimoni() {
  const res = await fetch(API + "?action=getTestimoni");
  const data = await res.json();

  const list = document.getElementById("testimoniList");
  if (!list) return;

  list.innerHTML = "";

  if (data.length === 0) {
    list.innerHTML = "<p class='text-center'>Belum ada testimoni alumni.</p>";
    return;
  }

  data.forEach(t => {
    list.innerHTML += `
      <div class="col-md-4 mb-3">
        <div class="card shadow-sm text-center h-100">
          <div class="card-body">

            <img 
              src="${t.foto || 'img/user.png'}"
              class="rounded-circle mb-3"
              width="80"
              height="80"
              style="object-fit:cover">

            <h6 class="fw-bold mb-0">${t.nama}</h6>
            <small class="text-muted">
              ${t.program_studi || ""}
            </small>

            <p class="mt-3 fst-italic">
              "${t.isi}"
            </p>

          </div>
        </div>
      </div>
    `;
  });
}

document.addEventListener("DOMContentLoaded", loadTestimoni);
</script>
<script>
async function loadNotifikasi() {
  const email = localStorage.getItem("email");
  if (!email) return;

  const res = await fetch(
    API + "?action=getKontribusiSaya&email=" + encodeURIComponent(email)
  );

  const data = await res.json();
  const box = document.getElementById("notifKontribusi");

  if (!data || data.length === 0) {
    box.innerHTML =
      "<div class='alert alert-secondary'>Belum ada kontribusi.</div>";
    return;
  }

  box.innerHTML = "";

  data.forEach(k => {
    let warna = "secondary";
    let icon = "‚ÑπÔ∏è";

    if (k.status === "Approved") {
      warna = "success";
      icon = "‚úÖ";
    }
    if (k.status === "Rejected") {
      warna = "danger";
      icon = "‚ùå";
    }

    box.innerHTML += `
      <div class="alert alert-${warna}">
        ${icon}
        <b>${k.jenis}</b> ‚Äî ${k.judul}<br>
        Status: <b>${k.status}</b>
      </div>
    `;
  });
}

loadNotifikasi();
</script>
<script>
document.querySelectorAll(".formKontribusi").forEach(form => {
  form.addEventListener("submit", async e => {
    e.preventDefault();

    const fd = new FormData(form);

    fd.append("action", "addKontribusi");
    fd.append("jenis", form.dataset.jenis);
    fd.append("email", localStorage.getItem("email"));
    fd.append("nama", localStorage.getItem("nama"));

    await fetch(API, {
      method: "POST",
      body: fd
    });

    alert("‚úÖ Kontribusi berhasil dikirim");
    location.reload();
  });
});
</script>
<a
  href="https://wa.me/6281234567890?text=Halo%20Admin%20Portal%20Alumni%20Universitas%20Kuningan"
  class="wa-float"
  target="_blank"
>
  <i class="bi bi-whatsapp"></i>
</a>
<script>
function heroSearch() {
  const keyword = document
    .getElementById("searchHero")
    .value
    .trim()
    .toLowerCase();

  if (!keyword) {
    alert("Masukkan kata kunci pencarian");
    return;
  }

  /* ======================
     LOWONGAN
  ====================== */
  const adaLowongan = allData.some(l =>
    l.judul.toLowerCase().includes(keyword) ||
    l.perusahaan.toLowerCase().includes(keyword)
  );

  /* ======================
     BERITA
  ====================== */
  const adaBerita = allBerita.some(b =>
    b.judul.toLowerCase().includes(keyword) ||
    b.ringkasan.toLowerCase().includes(keyword)
  );

  /* ======================
     TESTIMONI
  ====================== */
  const testimoniText =
    document.getElementById("testimoniList")?.innerText.toLowerCase() || "";
  const adaTestimoni = testimoniText.includes(keyword);

  /* ======================
     KONTRIBUSI
  ====================== */
  const kontribusiText =
    document.getElementById("kontribusi")?.innerText.toLowerCase() || "";
  const adaKontribusi = kontribusiText.includes(keyword);

  /* ======================
     PODCAST
  ====================== */
  const podcastText =
    document.getElementById("podcast")?.innerText.toLowerCase() || "";

  const kataPodcast = [
    "podcast",
    "youtube",
    "alumni bekerja",
    "karier",
    "kerja",
    "pengalaman kerja"
  ];

  const adaPodcast =
    kataPodcast.some(k => keyword.includes(k)) ||
    podcastText.includes(keyword);

  /* ======================
     ARAHKAN
  ====================== */
  if (adaLowongan) {
    location.href = "#lowongan";

    setTimeout(() => {
      const input = document.getElementById("searchInput");
      if (input) {
        input.value = keyword;
        input.dispatchEvent(new Event("input"));
      }
    }, 400);

  } else if (adaBerita) {
    location.href = "#berita";

  } else if (adaTestimoni) {
    location.href = "#testimoni";

  } else if (adaKontribusi) {
    location.href = "#kontribusi";

  } else if (adaPodcast) {
    location.href = "#podcast";

  } else {
    alert("‚ùå Data tidak ditemukan di Portal Alumni");
  }
}
</script>
<script>
/* =========================
   LOAD PODCAST (FINAL FIX)
========================= */
async function loadPodcast() {
  try {
    const res = await fetch(API + "?action=getPodcast");
    const data = await res.json();

    const list = document.getElementById("podcastList");

    // ‚úÖ pastikan ARRAY
    if (!Array.isArray(data)) {
      list.innerHTML =
        "<p class='text-center text-danger'>Data podcast tidak valid.</p>";
      return;
    }

    // ‚úÖ kosong
    if (data.length === 0) {
      list.innerHTML =
        "<p class='text-center'>Belum ada podcast alumni.</p>";
      return;
    }

    list.innerHTML = "";

    data.forEach(p => {
      let embed = (p.youtube || "").trim();

      // convert youtube link ‚Üí embed
      if (embed.includes("watch?v=")) {
        embed = embed.replace("watch?v=", "embed/");
      }

      if (embed.includes("youtu.be/")) {
        embed =
          "https://www.youtube.com/embed/" +
          embed.split("youtu.be/")[1];
      }

      list.innerHTML += `
        <div class="col-md-6 mb-4">
          <div class="card shadow-sm h-100">

            <iframe
              width="100%"
              height="260"
              src="${embed}"
              title="${p.judul}"
              frameborder="0"
              allowfullscreen>
            </iframe>

            <div class="card-body">
              <h6 class="fw-bold">${p.judul}</h6>
              <p class="text-muted">${p.deskripsi || ""}</p>
            </div>

          </div>
        </div>
      `;
    });

  } catch (err) {
    console.error(err);
    document.getElementById("podcastList").innerHTML =
      "<p class='text-center text-danger'>Gagal memuat podcast.</p>";
  }
}

document.addEventListener("DOMContentLoaded", loadPodcast);
</script>
</body>
</html>
